{"version":3,"file":"tpk-select-create.js","sources":["../../src/components/tpk-select-create.gts"],"sourcesContent":["/* eslint-disable no-fallthrough */\nimport Component from '@glimmer/component';\nimport { assert } from '@ember/debug';\nimport type { ComponentLike, WithBoundArgs } from '@glint/template';\nimport { hash } from '@ember/helper';\nimport { type Select } from 'ember-power-select/components/power-select';\n// @ts-expect-error missing types\nimport PowerSelectMultipleWithCreate from 'ember-power-select-with-create/components/power-select-multiple-with-create';\n// @ts-expect-error missing types\nimport PowerSelectWithCreate from 'ember-power-select-with-create/components/power-select-with-create';\nimport TpkSelectOption from './tpk-select/option.gts';\nimport type { TpkSelectSignature } from './tpk-select';\nimport { guidFor } from '@ember/object/internals';\n\nexport interface TpkSelectCreateSignature {\n  Args: TpkSelectSignature['Args'] & {\n    multiple?: boolean;\n    options: unknown[];\n    selected?: unknown;\n    label: string;\n    placeholder?: string;\n    renderInPlace?: boolean;\n    allowClear?: boolean;\n    disabled?: boolean;\n    initiallyOpened?: boolean;\n    loadingMessage?: string;\n    selectedItemComponent?: string | ComponentLike<unknown>;\n    placeholderComponent?: string | ComponentLike<unknown>;\n    searchEnabled?: boolean;\n    searchField?: string;\n    searchPlaceholder?: string;\n    searchMessage?: string;\n    noMatchesMessage?: string;\n    search?:\n      | ((\n          term: string,\n          select: Select,\n        ) => readonly unknown[] | Promise<readonly unknown[]>)\n      | undefined;\n    onChange: (selection: unknown, select: Select, event?: Event) => void;\n    onCreate: (selection: unknown, select: Select, event?: Event) => void;\n    buildSuggestion?: (term: string) => string;\n    showCreateWhen?: (term: string) => boolean;\n    onKeyDown?:\n      | ((select: Select, e: KeyboardEvent) => boolean | undefined)\n      | undefined;\n  };\n  Blocks: {\n    default: [\n      {\n        Option: WithBoundArgs<typeof TpkSelectOption, 'option'>;\n      },\n    ];\n  };\n  Element: HTMLDivElement;\n}\n\nexport default class TpkSelectCreateComponent extends Component<TpkSelectCreateSignature> {\n  guid = guidFor(this);\n\n  constructor(owner: unknown, args: TpkSelectCreateSignature['Args']) {\n    super(owner, args);\n\n    assert(\n      'Please provide an @options array to component',\n      args.options !== undefined,\n    );\n    assert(\n      'Please provide an @onChange function',\n      typeof args.onChange === 'function',\n    );\n    assert(\n      'Please provide an @onCreate function',\n      typeof args.onCreate === 'function',\n    );\n  }\n  get renderInPlace() {\n    return this.args.renderInPlace === false ? false : true;\n  }\n\n  <template>\n    <div class='tpk-select-create' ...attributes>\n      <label class='tpk-select-create-label' for={{this.guid}}>\n        {{@label}}\n      </label>\n      {{#if @multiple}}\n        <PowerSelectMultipleWithCreate\n          @placeholder={{@placeholder}}\n          @options={{@options}}\n          @selected={{@selected}}\n          @allowClear={{@allowClear}}\n          @onChange={{@onChange}}\n          @ariaLabelledBy={{this.guid}}\n          @ariaLabel={{this.guid}}\n          @onCreate={{@onCreate}}\n          @renderInPlace={{this.renderInPlace}}\n          @selectedItemComponent={{@selectedItemComponent}}\n          @placeholderComponent={{@placeholderComponent}}\n          @searchEnabled={{@searchEnabled}}\n          @searchField={{@searchField}}\n          @searchPlaceholder={{@searchPlaceholder}}\n          @searchMessage={{@searchMessage}}\n          @search={{@search}}\n          @onKeydown={{@onKeyDown}}\n          @disabled={{@disabled}}\n          @dropdownClass='tpk-select-create-dropdown'\n          @triggerClass='tpk-select-create-trigger'\n          @buildSuggestion={{@buildSuggestion}}\n          @showCreateWhen={{@showCreateWhen}}\n          @initiallyOpened={{@initiallyOpened}}\n          @loadingMessage={{@loadingMessage}}\n          @noMatchesMessage={{@noMatchesMessage}}\n          @triggerId={{this.guid}}\n          as |option|\n        >\n          {{yield (hash Option=(component TpkSelectOption option=option))}}\n        </PowerSelectMultipleWithCreate>\n      {{else}}\n        <PowerSelectWithCreate\n          @placeholder={{@placeholder}}\n          @options={{@options}}\n          @selected={{@selected}}\n          @allowClear={{@allowClear}}\n          @onChange={{@onChange}}\n          @ariaLabelledBy={{this.guid}}\n          @ariaLabel={{this.guid}}\n          @onCreate={{@onCreate}}\n          @renderInPlace={{this.renderInPlace}}\n          @selectedItemComponent={{@selectedItemComponent}}\n          @placeholderComponent={{@placeholderComponent}}\n          @searchEnabled={{@searchEnabled}}\n          @searchField={{@searchField}}\n          @searchPlaceholder={{@searchPlaceholder}}\n          @searchMessage={{@searchMessage}}\n          @search={{@search}}\n          @onKeydown={{@onKeyDown}}\n          @disabled={{@disabled}}\n          @dropdownClass='tpk-select-create-dropdown'\n          @triggerClass='tpk-select-create-trigger'\n          @buildSuggestion={{@buildSuggestion}}\n          @showCreateWhen={{@showCreateWhen}}\n          @initiallyOpened={{@initiallyOpened}}\n          @loadingMessage={{@loadingMessage}}\n          @noMatchesMessage={{@noMatchesMessage}}\n          @triggerId={{this.guid}}\n          as |option|\n        >\n          {{yield (hash Option=(component TpkSelectOption option=option))}}\n        </PowerSelectWithCreate>\n      {{/if}}\n    </div>\n  </template>\n}\n"],"names":["TpkSelectCreateComponent","Component","constructor","owner","args","_defineProperty","guidFor","assert","options","undefined","onChange","onCreate","renderInPlace","_TpkSelectCreateComponent","setComponentTemplate","precompileTemplate","strictMode","scope","PowerSelectMultipleWithCreate","hash","TpkSelectOption","PowerSelectWithCreate"],"mappings":";;;;;;;;;;;;;AAyDe,MAAMA,iCAAiCC,SAAU,CAAA;AAG9DC,EAAAA,WAAAA,CAAYC,KAAc,EAAEC,IAAsC,EAAE;AAClE,IAAA,KAAK,CAACD,KAAO,EAAAC,IAAA,CAAA,CAAA;AAAAC,IAAAA,eAAA,CAHRC,IAAAA,EAAAA,MAAAA,EAAAA,OAAA,CAAQ,IAAI,CAAE,CAAA,CAAA;IAKnBC,MACE,CAAA,+CAAA,EACAH,IAAK,CAAAI,OAAO,KAAKC,SAAA,CAAA,CAAA;IAEnBF,MAAA,CACE,sCACA,EAAA,OAAOH,IAAK,CAAAM,QAAQ,KAAK,UAAA,CAAA,CAAA;IAE3BH,MAAA,CACE,sCACA,EAAA,OAAOH,IAAK,CAAAO,QAAQ,KAAK,UAAA,CAAA,CAAA;AAE7B,GAAA;EACA,IAAIC,aAAgBA,GAAA;IAClB,OAAO,IAAI,CAACR,IAAI,CAACQ,aAAa,KAAK,QAAQ,KAAQ,GAAA,IAAA,CAAA;AACrD,GAAA;AA0EF,CAAA;AAAAC,yBAAA,GA/FqBb;AAuBnBc,oBAAA,CAAAC,kBAAA,CAuEA,8tEAAA,EAAA;EAAAC,UAAA,EAAA,IAAA;AAAAC,EAAAA,KAAA,EAAAA,OAAA;IAAAC,6BAAA;IAAAC,IAAA;IAAAC,eAAA;AAAAC,IAAAA,qBAAAA;AAAA,GAAA,CAAA;AAAU,CAAA,CAAA,EAAAR,yBAAA,CAAA;;;;"}