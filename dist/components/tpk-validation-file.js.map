{"version":3,"file":"tpk-validation-file.js","sources":["../../src/components/tpk-validation-file.gts"],"sourcesContent":["import { action } from '@ember/object';\nimport {\n  BaseValidationComponent,\n  type BaseValidationSignature,\n} from './base.ts';\nimport TpkFile, {\n  type TpkFileSignature,\n} from '@triptyk/ember-input/components/tpk-file';\n\nimport { hash } from '@ember/helper';\n\nexport interface TpkValidationFileComponentSignature\n  extends BaseValidationSignature {\n  Args: BaseValidationSignature['Args'] & {\n    label: string;\n    multiple?: boolean;\n    disabled?: boolean;\n    changeEvent?: 'input' | 'change';\n    onChange?: (file: File[]) => void;\n  };\n  Blocks: {\n    default: [\n      {\n        Input: TpkFileSignature['Blocks']['default'][0]['Input'];\n        Label: TpkFileSignature['Blocks']['default'][0]['Label'];\n        errors: TpkValidationFileComponent['errors'];\n        hasError: TpkValidationFileComponent['hasError'];\n        firstError: TpkValidationFileComponent['firstError'];\n      },\n    ];\n  };\n}\n\nexport default class TpkValidationFileComponent extends BaseValidationComponent<TpkValidationFileComponentSignature> {\n  @action\n  onChange(file: File[]) {\n    if (this.args.onChange) {\n      return this.args.onChange(file);\n    }\n\n    if (this.args.multiple === true) {\n      const currentFiles =\n        (this.args.changeset.get(this.args.validationField) as File[]) ?? [];\n\n      return this.args.changeset.set(this.args.validationField, [\n        ...currentFiles,\n        ...file,\n      ]);\n    } else {\n      return this.args.changeset.set(this.args.validationField, file[0]);\n    }\n  }\n\n  <template>\n    <TpkFile\n      @disabled={{@disabled}}\n      @label={{@label}}\n      @onChange={{this.onChange}}\n      @changeEvent={{@changeEvent}}\n      @multiple={{@multiple}}\n      as |I|\n    >\n      {{yield\n        (hash\n          Input=I.Input\n          Label=I.Label\n          errors=this.errors\n          hasError=this.hasError\n          firstError=this.firstError\n        )\n      }}\n    </TpkFile>\n  </template>\n}\n"],"names":["TpkValidationFileComponent","BaseValidationComponent","onChange","file","args","multiple","currentFiles","changeset","get","validationField","set","setComponentTemplate","precompileTemplate","strictMode","scope","TpkFile","hash","_TpkValidationFileComponent","_applyDecoratedDescriptor","_class","prototype","action","Object","getOwnPropertyDescriptor"],"mappings":";;;;;;;;;AAiCqBA,IAAAA,sEAAN,MAAMA,mCAAmCC,uBAAwB,CAAA;EAE9EC,QAASA,CAAAC,IAAY,EAAE;AACrB,IAAA,IAAI,IAAI,CAACC,IAAI,CAACF,QAAQ,EAAE;AACtB,MAAA,OAAO,IAAI,CAACE,IAAI,CAACF,QAAQ,CAACC,IAAA,CAAA,CAAA;AAC5B,KAAA;AAEA,IAAA,IAAI,IAAI,CAACC,IAAI,CAACC,QAAQ,KAAK,IAAM,EAAA;AAC/B,MAAA,MAAMC,eACH,IAAI,CAACF,IAAI,CAACG,SAAS,CAACC,GAAG,CAAC,IAAI,CAACJ,IAAI,CAACK,eAAe,CAAK,IAAW,EAAE,CAAA;MAEtE,OAAO,IAAI,CAACL,IAAI,CAACG,SAAS,CAACG,GAAG,CAAC,IAAI,CAACN,IAAI,CAACK,eAAe,EAAE,CACrD,GAAAH,YAAA,EACA,GAAAH,IAAA,CACJ,CAAA,CAAA;AACH,KAAO,MAAA;AACL,MAAA,OAAO,IAAI,CAACC,IAAI,CAACG,SAAS,CAACG,GAAG,CAAC,IAAI,CAACN,IAAI,CAACK,eAAe,EAAEN,IAAI,CAAC,CAAE,CAAA,CAAA,CAAA;AACnE,KAAA;AACF,GAAA;AAsBF,CAAA,EAAAQ,oBAAA,CApBEC,kBAAA,CAmBA,iSAAA,EAAA;EAAAC,UAAA,EAAA,IAAA;AAAAC,EAAAA,KAAA,EAAAA,OAAA;IAAAC,OAAA;AAAAC,IAAAA,IAAAA;AAAA,GAAA,CAAA;AAAU,CAAA,CAAA,EAAAC,2BAAA,CAAAA,EAAAA,2BAAA,CAAAC,EAAAA,yBAAA,CAAAC,MAAA,CAAAC,SAAA,EAtCTC,UAAAA,EAAAA,CAAAA,MAAA,GAAAC,MAAA,CAAAC,wBAAA,CAAAJ,MAAA,CAAAC,SAAA,EAAA,UAAA,CAAA,EAAAD,MAAA,CAAAC,SAAA,CAAA,EAAAD,MAAA;;;;"}