{"version":3,"file":"tpk-button.js","sources":["../../src/components/tpk-button.gts"],"sourcesContent":["import { guidFor } from '@ember/object/internals';\nimport Component from '@glimmer/component';\nimport type { BaseUIComponentArgs } from './base.ts';\nimport type { MergeDeep } from 'type-fest';\nimport { on } from '@ember/modifier';\nimport perform from 'ember-concurrency/helpers/perform';\nimport { task } from 'ember-concurrency';\n\nexport type TpkButtonSignature = {\n  Args: MergeDeep<\n    BaseUIComponentArgs['Args'],\n    {\n      allowSpam?: boolean;\n      disabled?: boolean;\n      class?: string;\n      onClick?: (e: Event) => void | Promise<void>;\n    }\n  >;\n  Blocks: {\n    default: [];\n  };\n  Element: HTMLButtonElement;\n};\n\nexport default class TpkButtonComponent extends Component<TpkButtonSignature> {\n  guid = guidFor(this);\n\n  performClick = task(this, { drop: true }, async (e: Event) => {\n    return this.args.onClick?.(e);\n  });\n\n  onClick = task(this, async (e: Event) => {\n    if (this.args.allowSpam !== true) {\n      return this.performClick.perform(e);\n    }\n    return this.args.onClick?.(e);\n  });\n\n  get disabled() {\n    return this.args.disabled ?? false;\n  }\n\n  <template>\n    <button\n      id={{this.guid}}\n      disabled={{this.disabled}}\n      type='button'\n      class='tpk-button'\n      {{on 'click' (perform this.onClick)}}\n      data-test-tpk-button\n      ...attributes\n    >\n      {{yield}}\n    </button>\n  </template>\n}\n"],"names":["TpkButtonComponent","Component","constructor","args","_defineProperty","guidFor","_buildTask","context","generator","e","onClick","drop","allowSpam","performClick","perform","disabled","_TpkButtonComponent","setComponentTemplate","precompileTemplate","strictMode","scope","on"],"mappings":";;;;;;;;;;;AAwBe,MAAMA,2BAA2BC,SAAU,CAAA;AAAAC,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;AAAAC,IAAAA,eAAA,CACjDC,IAAAA,EAAAA,MAAAA,EAAAA,OAAA,CAAQ,IAAI,CAAE,CAAA,CAAA;AAAAD,IAAAA,eAAA,uBAAAE,SAAA,CAAA,OAAA;MAAAC,OAAA,EAAA,IAAA;MAAAC,SAAA,EAAA,WAE4BC,CAAG,EAAA;AAClD,QAAA,OAAO,IAAI,CAACN,IAAI,CAACO,OAAO,GAAGD,CAAA,CAAA,CAAA;AAC7B,OAAA;KAF0B,CAAA,EAAA;AAAEE,MAAAA,IAAM,EAAA,IAAA;KAAK,EAAA,cAAA,EAAA,IAAA,CAAA,CAAA,CAAA;AAAAP,IAAAA,eAAA,kBAAAE,SAAA,CAAA,OAAA;MAAAC,OAAA,EAAA,IAAA;MAAAC,SAAA,EAAA,WAIXC,CAAG,EAAA;AAC7B,QAAA,IAAI,IAAI,CAACN,IAAI,CAACS,SAAS,KAAK,IAAM,EAAA;AAChC,UAAA,OAAO,IAAI,CAACC,YAAY,CAACC,OAAO,CAACL,CAAA,CAAA,CAAA;AACnC,SAAA;AACA,QAAA,OAAO,IAAI,CAACN,IAAI,CAACO,OAAO,GAAGD,CAAA,CAAA,CAAA;AAC7B,OAAA;AAAG,KAAA,CAAA,EAAA,IAAA,EAAA,SAAA,EAAA,IAAA,CAAA,CAAA,CAAA;AAAA,GAAA;EAEH,IAAIM,QAAWA,GAAA;AACb,IAAA,OAAO,IAAI,CAACZ,IAAI,CAACY,QAAQ,IAAI,KAAA,CAAA;AAC/B,GAAA;AAeF,CAAA;AAAAC,mBAAA,GA/BqBhB;AAkBnBiB,oBAAA,CAAAC,kBAAA,CAYA,gNAAA,EAAA;EAAAC,UAAA,EAAA,IAAA;AAAAC,EAAAA,KAAA,EAAAA,OAAA;IAAAC,EAAA;AAAAP,IAAAA,OAAAA;AAAA,GAAA,CAAA;AAAU,CAAA,CAAA,EAAAE,mBAAA,CAAA;;;;"}