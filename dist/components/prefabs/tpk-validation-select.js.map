{"version":3,"file":"tpk-validation-select.js","sources":["../../../src/components/prefabs/tpk-validation-select.gts"],"sourcesContent":["import { action } from \"@ember/object\";\nimport { BaseValidationComponent, type BaseValidationSignature } from \"../base.ts\";\nimport TpkValidationErrorsComponent from './tpk-validation-errors.gts';\nimport { assert } from \"@ember/debug\";\nimport TpkSelectComponent, { type TpkSelectSignature, type Select } from \"@triptyk/ember-input/components/tpk-select\";\n\nexport interface TpkValidationSelectPrefabSignature extends BaseValidationSignature {\n  Args: Omit<\n    BaseValidationSignature['Args'] & TpkSelectSignature['Args'] & {\n      onChange?: (value: unknown, select: Select, event?: Event) => void;\n    },\n    'searchField' | 'searchPlaceholder' | 'searchMessage' | 'noMatchesMessage' | 'search'\n  >;\n  Blocks: {\n    default: [];\n  };\n  Element: HTMLDivElement;\n}\n\nexport default class TpkValidationSelectPrefabComponent extends BaseValidationComponent<TpkValidationSelectPrefabSignature> {\n  constructor(\n    owner: unknown,\n    args: TpkValidationSelectPrefabSignature['Args'],\n  ) {\n    super(owner, args);\n    assert(\n      'If you want use search, please use TpkValidationSelectSearchPrefab',\n      typeof args.searchEnabled === 'undefined',\n    );\n  }\n\n  @action\n  onChange(selection: unknown, select: Select, event?: Event) {\n    if (this.args.onChange) {\n      return this.args.onChange(selection, select, event);\n    }\n    return this.args.changeset.set(this.args.validationField, selection);\n  }\n\n  get label() {\n    return this.mandatory ? `${this.args.label} *` : this.args.label;\n  }\n\n  toString = (v: unknown) => {\n    return String(v).toString();\n  };\n\n  <template>\n    <div\n      class=\"{{if @disabled \"disabled\"}} tpk-select-container\"\n      anchorScrollUp={{@validationField}}\n      data-has-error='{{this.hasError}}'\n      data-test-tpk-prefab-select-container\n      ...attributes\n    >\n      <TpkSelectComponent\n        @label={{@label}}\n        @multiple={{@multiple}}\n        @disabled={{@disabled}}\n        @placeholder={{@placeholder}}\n        @initiallyOpened={{@initiallyOpened}}\n        @allowClear={{@allowClear}}\n        @options={{@options}}\n        @onChange={{this.onChange}}\n        @selected={{this.value}}\n        @labelComponent={{@labelComponent}}\n        @labelClass=\"tpk-label\"\n        @selectedItemComponent={{@selectedItemComponent}}\n        @placeholderComponent={{@placeholderComponent}}\n      as |S|>\n        <S.Option as |O|>\n          {{this.toString O.option}}\n        </S.Option>\n      </TpkSelectComponent>\n      <TpkValidationErrorsComponent\n        class=\"tpk-validation-errors\"\n        @errors={{this.errors}}\n      />\n    </div>\n  </template>\n}\n"],"names":["TpkValidationSelectPrefabComponent","BaseValidationComponent","constructor","owner","args","_defineProperty","v","String","toString","assert","searchEnabled","onChange","selection","select","event","changeset","set","validationField","label","mandatory","setComponentTemplate","precompileTemplate","strictMode","scope","TpkSelectComponent","TpkValidationErrorsComponent","_TpkValidationSelectPrefabComponent","_applyDecoratedDescriptor","_class","prototype","action","Object","getOwnPropertyDescriptor"],"mappings":";;;;;;;;;;AAmBqBA,IAAAA,sFAAN,MAAMA,2CAA2CC,uBAAwB,CAAA;AACtFC,EAAAA,WAAAA,CACEC,KAAc,EACdC,IAAgD,EAChD;AACA,IAAA,KAAK,CAACD,KAAO,EAAAC,IAAA,CAAA,CAAA;IAAAC,eAAA,CAAA,IAAA,EAAA,UAAA,EAmBHC,CAAU,IAAA;AACpB,MAAA,OAAOC,MAAA,CAAOD,GAAGE,QAAQ,EAAA,CAAA;KACzB,CAAA,CAAA;IApBAC,MAAA,CACE,oEACA,EAAA,OAAOL,IAAK,CAAAM,aAAa,KAAK,WAAA,CAAA,CAAA;AAElC,GAAA;AAGAC,EAAAA,QAASA,CAAAC,SAAkB,EAAEC,MAAc,EAAEC,KAAa,EAAE;AAC1D,IAAA,IAAI,IAAI,CAACV,IAAI,CAACO,QAAQ,EAAE;MACtB,OAAO,IAAI,CAACP,IAAI,CAACO,QAAQ,CAACC,WAAWC,MAAQ,EAAAC,KAAA,CAAA,CAAA;AAC/C,KAAA;AACA,IAAA,OAAO,IAAI,CAACV,IAAI,CAACW,SAAS,CAACC,GAAG,CAAC,IAAI,CAACZ,IAAI,CAACa,eAAe,EAAEL,SAAA,CAAA,CAAA;AAC5D,GAAA;EAEA,IAAIM,KAAQA,GAAA;AACV,IAAA,OAAO,IAAI,CAACC,SAAS,GAAG,CAAA,EAAG,IAAI,CAACf,IAAI,CAACc,KAAK,IAAI,GAAG,IAAI,CAACd,IAAI,CAACc,KAAK,CAAA;AAClE,GAAA;AAuCF,CAAA,EAAAE,oBAAA,CAjCEC,kBAAA,CAgCA,01BAAA,EAAA;EAAAC,UAAA,EAAA,IAAA;AAAAC,EAAAA,KAAA,EAAAA,OAAA;IAAAC,kBAAA;AAAAC,IAAAA,4BAAAA;AAAA,GAAA,CAAA;AAAU,CAAA,CAAA,EAAAC,mCAAA,CAAAA,EAAAA,mCAAA,CAAAC,EAAAA,yBAAA,CAAAC,MAAA,CAAAC,SAAA,EAhDTC,UAAAA,EAAAA,CAAAA,MAAA,GAAAC,MAAA,CAAAC,wBAAA,CAAAJ,MAAA,CAAAC,SAAA,EAAA,UAAA,CAAA,EAAAD,MAAA,CAAAC,SAAA,CAAA,EAAAD,MAAA;;;;"}