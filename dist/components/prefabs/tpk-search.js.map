{"version":3,"file":"tpk-search.js","sources":["../../../src/components/prefabs/tpk-search.gts"],"sourcesContent":["import type { MergeDeep } from 'type-fest';\nimport type { BaseUIComponentArgs } from '../base';\nimport Component from '@glimmer/component';\nimport { task } from 'ember-concurrency';\nimport { on } from '@ember/modifier';\nimport TpkInputComponent from '../tpk-input.gts';\n\nexport type TpkSearchPrefabSignature = {\n  Args: MergeDeep<\n    BaseUIComponentArgs['Args'],\n    {\n      placeholder?: string;\n      label?: string;\n      onSearch: (e: Event, value: string) => unknown;\n    }\n  >;\n  Blocks: {\n    default: [];\n  };\n  Element: HTMLDivElement;\n};\n\nexport default class TpkSearchPrefabComponent extends Component<TpkSearchPrefabSignature> {\n  performSearch = task(this, { drop: true }, async (value: string, e: Event) => {\n    e.preventDefault();\n    \n    return this.args.onSearch(e,value);\n  });\n\n  submitSearch = (e: Event) => {\n    e.preventDefault();\n    const form = e.target as HTMLInputElement;\n    const input = form.querySelector('input');\n    let value= '';\n    if(input?.value){\n      value = input?.value\n    }\n    \n    this.performSearch.perform(value, e);\n  };\n\n  get labelOrDefault () {\n    return this.args.label ?? '';\n  }\n\n  <template>\n    <form {{ on 'submit' this.submitSearch }}>\n      <TpkInputComponent \n        @label={{this.labelOrDefault}}\n        @placeholder={{@placeholder}}\n        @type=\"search\"\n      as |C|>\n        <div class=\"tpk-search\" data-test-tpk-prefab-search-container ...attributes>\n          <C.Label class=\"tpk-search-label\">\n            {{#if this.performSearch.isRunning}}\n              <div class=\"tpk-search-button\">\n                <i class=\"tpk-search-loader\"></i>\n              </div>\n            {{else}}\n            <button type=\"submit\" data-test-search-submit>\n              <img\n                src='/assets/icons/search.svg'\n                data-test-tpk-search-icon\n                alt='magnyfying glass'\n                class='tpk-search-button'\n              />\n            </button>\n            {{/if}}\n            <C.Input class=\"tpk-search-input\" />\n          </C.Label>\n        </div>\n      </TpkInputComponent>\n    </form>\n  </template>\n}\n\n"],"names":["TpkSearchPrefabComponent","Component","constructor","args","_defineProperty","_buildTask","context","generator","value","e","preventDefault","onSearch","drop","form","target","input","querySelector","performSearch","perform","labelOrDefault","label","_TpkSearchPrefabComponent","setComponentTemplate","precompileTemplate","strictMode","scope","on","TpkInputComponent"],"mappings":";;;;;;;;;;AAsBe,MAAMA,iCAAiCC,SAAU,CAAA;AAAAC,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;AAAAC,IAAAA,eAAA,wBAAAC,SAAA,CAAA,OAAA;MAAAC,OAAA,EAAA,IAAA;AAAAC,MAAAA,SAAA,EAAAA,WACZC,KAAa,EAAEC,CAAG,EAAA;QAClEA,CAAA,CAAEC,cAAc,EAAA,CAAA;QAEhB,OAAO,IAAI,CAACP,IAAI,CAACQ,QAAQ,CAACF,CAAE,EAAAD,KAAA,CAAA,CAAA;AAC9B,OAAA;KAJ2B,CAAA,EAAA;AAAEI,MAAAA,IAAM,EAAA,IAAA;KAAK,EAAA,eAAA,EAAA,IAAA,CAAA,CAAA,CAAA;IAAAR,eAAA,CAAA,IAAA,EAAA,cAAA,EAMxBK,CAAG,IAAA;MACjBA,CAAA,CAAEC,cAAc,EAAA,CAAA;AAChB,MAAA,MAAMG,IAAA,GAAOJ,CAAE,CAAAK,MAAU,CAAA;AACzB,MAAA,MAAMC,KAAA,GAAQF,IAAK,CAAAG,aAAa,CAAC,OAAA,CAAA,CAAA;MACjC,IAAIR,KAAO,GAAA,EAAA,CAAA;MACX,IAAGO,OAAOP,KAAM,EAAA;QACdA,KAAA,GAAQO,KAAO,EAAAP,KAAA,CAAA;AACjB,OAAA;MAEA,IAAI,CAACS,aAAa,CAACC,OAAO,CAACV,KAAO,EAAAC,CAAA,CAAA,CAAA;KAClC,CAAA,CAAA;AAAA,GAAA;EAEF,IAAIU,cAAkBA,GAAA;AACpB,IAAA,OAAO,IAAI,CAAChB,IAAI,CAACiB,KAAK,IAAI,EAAA,CAAA;AAC5B,GAAA;AA+BF,CAAA;AAAAC,yBAAA,GApDqBrB;AAuBnBsB,oBAAA,CAAAC,kBAAA,CA4BA,s2BAAA,EAAA;EAAAC,UAAA,EAAA,IAAA;AAAAC,EAAAA,KAAA,EAAAA,OAAA;IAAAC,EAAA;AAAAC,IAAAA,iBAAAA;AAAA,GAAA,CAAA;AAAU,CAAA,CAAA,EAAAN,yBAAA,CAAA;;;;"}