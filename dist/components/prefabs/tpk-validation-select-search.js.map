{"version":3,"file":"tpk-validation-select-search.js","sources":["../../../src/components/prefabs/tpk-validation-select-search.gts"],"sourcesContent":["import {\n  type BaseValidationSignature,\n  BaseValidationComponent,\n} from '../base.ts';\nimport TpkSelectComponent from '@triptyk/ember-input/components/tpk-select';\nimport TpkValidationErrorsComponent from './tpk-validation-errors.gts';\nimport { assert } from '@ember/debug';\nimport { action } from '@ember/object';\nimport type { TpkSelectSignature, Select } from '@triptyk/ember-input/components/tpk-select';\n\nexport interface TpkValidationSelectSearchPrefabSignature\n  extends BaseValidationSignature {\n  Args: BaseValidationSignature['Args'] & TpkSelectSignature['Args'] & {\n    onChange?: (value: unknown, select: Select, event?: Event) => void;\n    onSearch: (term: string) => unknown[];\n  };\n  Blocks: {\n    default: [];\n  };\n  Element: HTMLDivElement;\n}\n\nexport default class TpkValidationSelectSearchPrefabComponent extends BaseValidationComponent<TpkValidationSelectSearchPrefabSignature> {\n  constructor(\n    owner: unknown,\n    args: TpkValidationSelectSearchPrefabSignature['Args'],\n  ) {\n    super(owner, args);\n    assert(\n      'Please provide an @onSearch function',\n      typeof args.onSearch === 'function',\n    );\n  }\n\n  get label() {\n    return this.mandatory ? `${this.args.label} *` : this.args.label;\n  }\n\n  @action onChange(selection: unknown, select: Select, event?: Event) {\n    if (this.args.onChange) {\n      return this.args.onChange(selection, select, event);\n    }\n    return this.args.changeset.set(this.args.validationField, selection);\n  }\n\n  toString = (v: unknown) => {\n    return String(v).toString();\n  };\n\n  <template>\n    <div\n      class=\"{{if @disabled \"disabled\"}} tpk-select-search-container\"\n      data-has-error='{{this.hasError}}'\n      anchorScrollUp={{@validationField}}\n      data-test-tpk-prefab-select-search-container\n      ...attributes\n    >\n      <TpkSelectComponent\n        @multiple={{@multiple}}\n        @placeholder={{@placeholder}}\n        @initiallyOpened={{@initiallyOpened}}\n        @allowClear={{@allowClear}}\n        @labelComponent={{@labelComponent}}\n        @labelClass=\"tpk-label\"\n        @selectedItemComponent={{@selectedItemComponent}}\n        @placeholderComponent={{@placeholderComponent}}\n        @label={{this.label}}\n        @options={{@options}}\n        @onChange={{this.onChange}}\n        @selected={{this.value}}\n        @search={{@onSearch}}\n        @searchEnabled={{true}}\n        @searchPlaceholder={{@searchPlaceholder}}\n        @searchMessage={{@searchMessage}}\n        @loadingMessage={{@loadingMessage}}\n        @noMatchesMessage={{@noMatchesMessage}}\n        @disabled={{@disabled}}\n        as |S|\n      >\n        <S.Option as |O|>\n          {{this.toString O.option}}\n        </S.Option>\n      </TpkSelectComponent>\n      <TpkValidationErrorsComponent\n        class=\"tpk-validation-errors\"\n        @errors={{this.errors}}\n      />\n    </div>\n  </template>\n}\n"],"names":["TpkValidationSelectSearchPrefabComponent","BaseValidationComponent","constructor","owner","args","_defineProperty","v","String","toString","assert","onSearch","label","mandatory","onChange","selection","select","event","changeset","set","validationField","setComponentTemplate","precompileTemplate","strictMode","scope","TpkSelectComponent","TpkValidationErrorsComponent","_TpkValidationSelectSearchPrefabComponent","_applyDecoratedDescriptor","_class","prototype","action","Object","getOwnPropertyDescriptor"],"mappings":";;;;;;;;;;AAsBqBA,IAAAA,kGAAN,MAAMA,iDAAiDC,uBAAwB,CAAA;AAC5FC,EAAAA,WAAAA,CACEC,KAAc,EACdC,IAAsD,EACtD;AACA,IAAA,KAAK,CAACD,KAAO,EAAAC,IAAA,CAAA,CAAA;IAAAC,eAAA,CAAA,IAAA,EAAA,UAAA,EAkBHC,CAAU,IAAA;AACpB,MAAA,OAAOC,MAAA,CAAOD,GAAGE,QAAQ,EAAA,CAAA;KACzB,CAAA,CAAA;IAnBAC,MAAA,CACE,sCACA,EAAA,OAAOL,IAAK,CAAAM,QAAQ,KAAK,UAAA,CAAA,CAAA;AAE7B,GAAA;EAEA,IAAIC,KAAQA,GAAA;AACV,IAAA,OAAO,IAAI,CAACC,SAAS,GAAG,CAAA,EAAG,IAAI,CAACR,IAAI,CAACO,KAAK,IAAI,GAAG,IAAI,CAACP,IAAI,CAACO,KAAK,CAAA;AAClE,GAAA;AAEQE,EAAAA,QAASA,CAAAC,SAAkB,EAAEC,MAAc,EAAEC,KAAa,EAAE;AAClE,IAAA,IAAI,IAAI,CAACZ,IAAI,CAACS,QAAQ,EAAE;MACtB,OAAO,IAAI,CAACT,IAAI,CAACS,QAAQ,CAACC,WAAWC,MAAQ,EAAAC,KAAA,CAAA,CAAA;AAC/C,KAAA;AACA,IAAA,OAAO,IAAI,CAACZ,IAAI,CAACa,SAAS,CAACC,GAAG,CAAC,IAAI,CAACd,IAAI,CAACe,eAAe,EAAEL,SAAA,CAAA,CAAA;AAC5D,GAAA;AA8CF,CAAA,EAAAM,oBAAA,CAxCEC,kBAAA,CAuCA,kjCAAA,EAAA;EAAAC,UAAA,EAAA,IAAA;AAAAC,EAAAA,KAAA,EAAAA,OAAA;IAAAC,kBAAA;AAAAC,IAAAA,4BAAAA;AAAA,GAAA,CAAA;AAAU,CAAA,CAAA,EAAAC,yCAAA,CAAAA,EAAAA,yCAAA,CAAAC,EAAAA,yBAAA,CAAAC,MAAA,CAAAC,SAAA,EAlDTC,UAAAA,EAAAA,CAAAA,MAAA,GAAAC,MAAA,CAAAC,wBAAA,CAAAJ,MAAA,CAAAC,SAAA,EAAA,UAAA,CAAA,EAAAD,MAAA,CAAAC,SAAA,CAAA,EAAAD,MAAA;;;;"}