{"version":3,"file":"tpk-table-generic.js","sources":["../../src/components/tpk-table-generic.gts"],"sourcesContent":["import { action } from '@ember/object';\nimport Component from '@glimmer/component';\nimport { tracked } from 'tracked-built-ins';\nimport type { WithBoundArgs } from '@glint/template';\nimport TableGenericSearchBarComponent from './tpk-table-generic/search-bar.gts';\nimport TableGenericTableComponent, {\n  type TableApi,\n} from './tpk-table-generic/table.gts';\nimport { hash } from '@ember/helper';\nimport IntlService from 'ember-intl/services/intl';\nimport { service } from '@ember/service';\n\nexport interface TableGenericComponentSignature {\n  Args: {\n    entity: string;\n    relationships?: string;\n    pageSizes?: number[];\n    filterText?: string;\n    pageSize?: number;\n    defaultSortColumn?: string;\n    // eslint-disable-next-line no-unused-vars\n    registerApi?: (api: TableApi) => unknown;\n    rowClick?: (element?:unknown, e?:Event) => void;\n    placeholder?: string;\n    label?: string;\n    additionalFilters?: Record<string, unknown>;\n  };\n  Blocks: {\n    default: [\n      {\n        onSearch: (value: string) => void;\n        SearchBar: WithBoundArgs<\n          typeof TableGenericSearchBarComponent,\n          'onSearch' | 'label' | 'placeholder'\n        >;\n        Table: WithBoundArgs<\n          typeof TableGenericTableComponent,\n          'rowClick' | 'filterText' | 'relationships' | 'registerApi' | 'entity' | 'pageSizes' | 'pageSize' | 'additionalFilters' | 'defaultSortColumn'\n        >;\n      },\n    ];\n  };\n}\n\nexport default class TableGenericComponent extends Component<TableGenericComponentSignature> {\n  @service declare intl: IntlService;\n  @tracked filterText?: string;\n\n  get label(){\n    if (this.args.label){\n      return this.args.label;\n    }\n    return this.intl.t('global.search');\n  }\n\n  get placeholder(){\n    if(this.args.placeholder){\n      return this.args.placeholder;\n    }\n    return this.intl.t('global.search');\n  }\n\n  @action\n  onSearch(value: string) {\n    this.filterText = value;\n  }\n\n  @action\n  rowClick(element?: unknown, e?: Event) {\n    this.args.rowClick?.(element, e);\n  }\n\n  <template>\n    {{log 'generic table' this.label this.placeholder}}\n    {{yield\n      (hash\n        onSearch= this.onSearch\n        SearchBar=(component\n          TableGenericSearchBarComponent\n          onSearch=this.onSearch\n          label=this.label\n          placeholder=this.placeholder\n        )\n        Table=(component\n          TableGenericTableComponent\n          rowClick=this.rowClick\n          filterText=this.filterText\n          relationships=@relationships\n          registerApi=@registerApi\n          entity=@entity\n          pageSizes=@pageSizes\n          pageSize=@pageSize\n          additionalFilters=@additionalFilters\n          defaultSortColumn=@defaultSortColumn\n        )\n      )\n    }}\n  </template>\n}\n"],"names":["TableGenericComponent","Component","constructor","args","_initializerDefineProperty","_descriptor","_descriptor2","label","intl","t","placeholder","onSearch","value","filterText","rowClick","element","e","setComponentTemplate","precompileTemplate","strictMode","scope","hash","TableGenericSearchBarComponent","TableGenericTableComponent","_TableGenericComponent","_applyDecoratedDescriptor","_class","prototype","service","configurable","enumerable","writable","initializer","tracked","action","Object","getOwnPropertyDescriptor"],"mappings":";;;;;;;;;;;;;AA4CqBA,IAAAA,4DAAN,MAAMA,8BAA8BC,SAAU,CAAA;AAAAC,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;AAAAC,IAAAA,0BAAA,eAAAC,WAAA,EAAA,IAAA,CAAA,CAAA;AAAAD,IAAAA,0BAAA,qBAAAE,YAAA,EAAA,IAAA,CAAA,CAAA;AAAA,GAAA;EAI3D,IAAIC,KAAOA,GAAA;AACT,IAAA,IAAI,IAAI,CAACJ,IAAI,CAACI,KAAK,EAAC;AAClB,MAAA,OAAO,IAAI,CAACJ,IAAI,CAACI,KAAK,CAAA;AACxB,KAAA;AACA,IAAA,OAAO,IAAI,CAACC,IAAI,CAACC,CAAC,CAAC,eAAA,CAAA,CAAA;AACrB,GAAA;EAEA,IAAIC,WAAaA,GAAA;AACf,IAAA,IAAG,IAAI,CAACP,IAAI,CAACO,WAAW,EAAC;AACvB,MAAA,OAAO,IAAI,CAACP,IAAI,CAACO,WAAW,CAAA;AAC9B,KAAA;AACA,IAAA,OAAO,IAAI,CAACF,IAAI,CAACC,CAAC,CAAC,eAAA,CAAA,CAAA;AACrB,GAAA;EAGAE,QAASA,CAAAC,KAAa,EAAE;IACtB,IAAI,CAACC,UAAU,GAAGD,KAAA,CAAA;AACpB,GAAA;AAGAE,EAAAA,QAAAA,CAASC,OAAiB,EAAEC,CAAS,EAAE;IACrC,IAAI,CAACb,IAAI,CAACW,QAAQ,GAAGC,OAAS,EAAAC,CAAA,CAAA,CAAA;AAChC,GAAA;AA4BF,CAAA,EAAAC,oBAAA,CA1BEC,kBAAA,CAyBA,8fAAA,EAAA;EAAAC,UAAA,EAAA,IAAA;AAAAC,EAAAA,KAAA,EAAAA,OAAA;IAAAC,IAAA;IAAAC,8BAAA;AAAAC,IAAAA,0BAAAA;AAAA,GAAA,CAAA;AAAU,CAAA,CAAA,EAAAC,sBAAA,CAAA,EAAAA,sBAAA,CAAAnB,EAAAA,WAAA,GAAAoB,yBAAA,CAAAC,MAAA,CAAAC,SAAA,WApDTC,OAAA,CAAA,EAAA;EAAAC,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;EAAAC,WAAA,EAAA,IAAA;AAAA,CAAA1B,CAAAA,EAAAA,YAAA,GAAAmB,yBAAA,CAAAC,MAAA,CAAAC,SAAA,iBACAM,OAAA,CAAA,EAAA;EAAAJ,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;EAAAC,WAAA,EAAA,IAAA;AAAA,CAAA,CAAA,EAAAP,yBAAA,CAAAC,MAAA,CAAAC,SAAA,EAAA,UAAA,EAAA,CAgBAO,MAAA,CAAAC,EAAAA,MAAA,CAAAC,wBAAA,CAAAV,MAAA,CAAAC,SAAA,EAAAD,UAAAA,CAAAA,EAAAA,MAAA,CAAAC,SAAA,CAAA,EAAAF,yBAAA,CAAAC,MAAA,CAAAC,SAAA,eAKAO,MAAA,CAAA,EAAAC,MAAA,CAAAC,wBAAA,CAAAV,MAAA,CAAAC,SAAA,EAAA,UAAA,CAAA,EAAAD,MAAA,CAAAC,SAAA,GAAAD,MAAA;;;;"}