{"version":3,"file":"tpk-actions-menu.js","sources":["../../src/components/tpk-actions-menu.gts"],"sourcesContent":["import { action } from '@ember/object';\nimport Component from '@glimmer/component';\nimport { tracked } from 'tracked-built-ins';\nimport type { WithBoundArgs } from '@glint/template';\nimport TpkActionsMenuElementComponent from './tpk-actions-menu/element.gts';\nimport { on } from '@ember/modifier';\nimport onClickOutside from 'ember-click-outside/modifiers/on-click-outside';\n\ninterface TpkActionsMenuComponentArgs {\n\n}\n\nexport interface TpkActionsMenuElementComponentSignature {\n  Args: TpkActionsMenuComponentArgs;\n  Element: HTMLDivElement;\n  Blocks: {\n    default: [\n      WithBoundArgs<typeof TpkActionsMenuElementComponent, 'handleAction'>,\n    ];\n  };\n}\n\nexport default class TpkActionsMenuComponent extends Component<TpkActionsMenuElementComponentSignature> {\n  @tracked isOpen = false;\n\n  get actionsMenuClass() {\n    return this.isOpen ? 'actions aopened' : 'actions';\n  }\n\n  @action closeMenu() {\n    this.isOpen = false;\n  }\n\n  @action handleKeyUp(e: KeyboardEvent) {\n    if (!this.isOpen) {\n      return;\n    }\n\n    if (e.key === 'Escape') {\n      this.isOpen = false;\n    }\n  }\n\n  @action handleAction(action: (...args: unknown[]) => void, e: Event) {\n    e.stopImmediatePropagation();\n    this.isOpen = false;\n    action(e);\n  }\n\n  @action toggle(e: Event) {\n    e.stopImmediatePropagation();\n    this.isOpen = !this.isOpen;\n  }\n\n  <template>\n    {{! template-lint-disable no-invalid-interactive }}\n    <div\n      class={{this.actionsMenuClass}}\n      data-test-actions-menu\n      {{!-- @glint-ignore --}}\n      {{onClickOutside this.closeMenu}}\n      {{on 'keyup' this.handleKeyUp}}\n      ...attributes\n    >\n      <button\n        type='button'\n        class='open_actions'\n        {{on 'click' this.toggle}}\n        title='actions'\n        data-test-actions-open-action\n      >\n        <img src='/assets/icons/kebab.svg' alt='seeAllAction' />\n      </button>\n      {{#if this.isOpen}}\n        <ul class='actions_list' >\n          {{yield\n            (component\n              TpkActionsMenuElementComponent handleAction=this.handleAction\n            )\n          }}\n        </ul>\n      {{/if}}\n    </div>\n  </template>\n}\n"],"names":["TpkActionsMenuComponent","Component","constructor","args","_initializerDefineProperty","_descriptor","actionsMenuClass","isOpen","closeMenu","handleKeyUp","e","key","handleAction","action","stopImmediatePropagation","toggle","setComponentTemplate","precompileTemplate","strictMode","scope","onClickOutside","on","TpkActionsMenuElementComponent","_TpkActionsMenuComponent","_applyDecoratedDescriptor","_class","prototype","tracked","configurable","enumerable","writable","initializer","Object","getOwnPropertyDescriptor"],"mappings":";;;;;;;;;;;AAsBqBA,IAAAA,gEAAN,MAAMA,gCAAgCC,SAAU,CAAA;AAAAC,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;AAAAC,IAAAA,0BAAA,iBAAAC,WAAA,EAAA,IAAA,CAAA,CAAA;AAAA,GAAA;EAG7D,IAAIC,gBAAmBA,GAAA;AACrB,IAAA,OAAO,IAAI,CAACC,MAAM,GAAG,iBAAoB,GAAA,SAAA,CAAA;AAC3C,GAAA;AAEQC,EAAAA,SAAYA,GAAA;IAClB,IAAI,CAACD,MAAM,GAAG,KAAA,CAAA;AAChB,GAAA;EAEQE,WAAYA,CAAAC,CAAgB,EAAE;AACpC,IAAA,IAAI,CAAC,IAAI,CAACH,MAAM,EAAE;AAChB,MAAA,OAAA;AACF,KAAA;AAEA,IAAA,IAAIG,CAAA,CAAEC,GAAG,KAAK,QAAU,EAAA;MACtB,IAAI,CAACJ,MAAM,GAAG,KAAA,CAAA;AAChB,KAAA;AACF,GAAA;AAEQK,EAAAA,YAAaA,CAAAC,MAAoC,EAAEH,CAAQ,EAAE;IACnEA,CAAA,CAAEI,wBAAwB,EAAA,CAAA;IAC1B,IAAI,CAACP,MAAM,GAAG,KAAA,CAAA;IACdM,MAAO,CAAAH,CAAA,CAAA,CAAA;AACT,GAAA;EAEQK,MAAOA,CAAAL,CAAQ,EAAE;IACvBA,CAAA,CAAEI,wBAAwB,EAAA,CAAA;AAC1B,IAAA,IAAI,CAACP,MAAM,GAAG,CAAC,IAAI,CAACA,MAAM,CAAA;AAC5B,GAAA;AAgCF,CAAA,EAAAS,oBAAA,CA9BEC,kBAAA,CA6BA,opBAAA,EAAA;EAAAC,UAAA,EAAA,IAAA;AAAAC,EAAAA,KAAA,EAAAA,OAAA;IAAAC,cAAA;IAAAC,EAAA;AAAAC,IAAAA,8BAAAA;AAAA,GAAA,CAAA;AAAU,CAAA,CAAA,EAAAC,wBAAA,CAAA,EAAAA,wBAAA,CAAAlB,EAAAA,WAAA,GAAAmB,yBAAA,CAAAC,MAAA,CAAAC,SAAA,aA5DTC,OAAA,CAAA,EAAA;EAAAC,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;AAAAC,EAAAA,WAAA,cAAA;AAAA,IAAA,OAAiB,KAAM,CAAA;AAAA,GAAA;AAAA,CAAA,CAAA,EAAAP,yBAAA,CAAAC,MAAA,CAAAC,SAAA,gBAMvBb,MAAA,CAAA,EAAAmB,MAAA,CAAAC,wBAAA,CAAAR,MAAA,CAAAC,SAAA,EAAA,WAAA,CAAA,EAAAD,MAAA,CAAAC,SAAA,CAAAF,EAAAA,yBAAA,CAAAC,MAAA,CAAAC,SAAA,EAAA,aAAA,EAAA,CAIAb,MAAA,CAAAmB,EAAAA,MAAA,CAAAC,wBAAA,CAAAR,MAAA,CAAAC,SAAA,EAAAD,aAAAA,CAAAA,EAAAA,MAAA,CAAAC,SAAA,CAAA,EAAAF,yBAAA,CAAAC,MAAA,CAAAC,SAAA,EAUAb,cAAAA,EAAAA,CAAAA,MAAA,GAAAmB,MAAA,CAAAC,wBAAA,CAAAR,MAAA,CAAAC,SAAA,mBAAAD,MAAA,CAAAC,SAAA,CAAAF,EAAAA,yBAAA,CAAAC,MAAA,CAAAC,SAAA,EAAA,QAAA,EAAA,CAMAb,MAAA,CAAA,EAAAmB,MAAA,CAAAC,wBAAA,CAAAR,MAAA,CAAAC,SAAA,EAAA,QAAA,CAAA,EAAAD,MAAA,CAAAC,SAAA,GAAAD,MAAA;;;;"}