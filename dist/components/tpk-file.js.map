{"version":3,"file":"tpk-file.js","sources":["../../src/components/tpk-file.gts"],"sourcesContent":["import { action } from '@ember/object';\nimport { tracked } from '@glimmer/tracking';\nimport { BaseUIComponent, type BaseUIComponentArgs } from './base.ts';\nimport type { MergeDeep } from 'type-fest';\nimport type { WithBoundArgs } from '@glint/template';\nimport TpkFileInputComponent from './tpk-file/input.gts';\nimport { hash } from '@ember/helper';\nimport TpkLabel from './tpk-label.gts';\n\nexport type TpkFileSignature = {\n  Args: MergeDeep<\n    BaseUIComponentArgs['Args'],\n    {\n      accept?: string;\n      multiple?: boolean;\n      disabled?: boolean;\n      onChange?: (value: File[], e: Event) => unknown;\n    }\n  >;\n  Blocks: {\n    default: [\n      {\n        Input: WithBoundArgs<\n          typeof TpkFileInputComponent,\n          'onChange' | 'accept' | 'disabled' | 'changeEvent' | 'guid'\n        >;\n        Label: WithBoundArgs<\n          typeof TpkLabel,\n          'label' | 'guid'\n        >;\n        guid: string;\n        changeEvent: 'input' | 'change';\n        onChange: TpkFileComponent['onChange'];\n        files: TpkFileComponent['files'];\n      },\n    ];\n  };\n};\n\nexport default class TpkFileComponent extends BaseUIComponent<TpkFileSignature> {\n  @tracked files: File[] = [];\n\n  @action onChange(e: Event) {\n    e.preventDefault();\n    const target = e.target as HTMLInputElement;\n    const files = Array.from(target.files ?? []);\n    this.files = files;\n    this.args.onChange?.(files, e);\n  }\n\n  <template>\n    {{yield\n      (hash\n        Input=(component\n          TpkFileInputComponent\n          onChange=this.onChange\n          accept=@accept\n          disabled=@disabled\n          multiple=@multiple\n          changeEvent=this.changeEvent\n          guid=this.guid\n        )\n        Label=(component\n          TpkLabel\n          label=@label\n          onChange=this.onChange\n          guid=this.guid\n        )\n        changeEvent=this.changeEvent\n        onChange=this.onChange\n        guid=this.guid\n        files=this.files\n      )\n    }}\n  </template>\n}\n"],"names":["TpkFileComponent","BaseUIComponent","constructor","args","_initializerDefineProperty","_descriptor","onChange","e","preventDefault","target","files","Array","from","setComponentTemplate","precompileTemplate","strictMode","scope","hash","TpkFileInputComponent","TpkLabel","_TpkFileComponent","_applyDecoratedDescriptor","_class","prototype","tracked","configurable","enumerable","writable","initializer","action","Object","getOwnPropertyDescriptor"],"mappings":";;;;;;;;;;;AAuCqBA,IAAAA,kDAAN,MAAMA,yBAAyBC,eAAgB,CAAA;AAAAC,EAAAA,WAAAA,CAAA,GAAAC,IAAA,EAAA;AAAA,IAAA,KAAA,CAAA,GAAAA,IAAA,CAAA,CAAA;AAAAC,IAAAA,0BAAA,gBAAAC,WAAA,EAAA,IAAA,CAAA,CAAA;AAAA,GAAA;EAGpDC,QAASA,CAAAC,CAAQ,EAAE;IACzBA,CAAA,CAAEC,cAAc,EAAA,CAAA;AAChB,IAAA,MAAMC,MAAA,GAASF,CAAE,CAAAE,MAAU,CAAA;IAC3B,MAAMC,QAAQC,KAAM,CAAAC,IAAI,CAACH,MAAO,CAAAC,KAAK,IAAI,EAAE,CAAA,CAAA;IAC3C,IAAI,CAACA,KAAK,GAAGA,KAAA,CAAA;IACb,IAAI,CAACP,IAAI,CAACG,QAAQ,GAAGI,KAAO,EAAAH,CAAA,CAAA,CAAA;AAC9B,GAAA;AA2BF,CAAA,EAAAM,oBAAA,CAzBEC,kBAAA,CAwBA,8VAAA,EAAA;EAAAC,UAAA,EAAA,IAAA;AAAAC,EAAAA,KAAA,EAAAA,OAAA;IAAAC,IAAA;IAAAC,qBAAA;AAAAC,IAAAA,QAAAA;AAAA,GAAA,CAAA;AAAU,CAAA,CAAA,EAAAC,iBAAA,CAAA,EAAAA,iBAAA,CAAAf,EAAAA,WAAA,GAAAgB,yBAAA,CAAAC,MAAA,CAAAC,SAAA,YAlCTC,OAAA,CAAA,EAAA;EAAAC,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;AAAAC,EAAAA,WAAA,cAAA;AAAA,IAAA,OAAwB,EAAE,CAAA;AAAA,GAAA;AAAA,CAAAP,CAAAA,EAAAA,yBAAA,CAAAC,MAAA,CAAAC,SAAA,EAE1BM,UAAAA,EAAAA,CAAAA,MAAA,GAAAC,MAAA,CAAAC,wBAAA,CAAAT,MAAA,CAAAC,SAAA,EAAA,UAAA,CAAA,EAAAD,MAAA,CAAAC,SAAA,GAAAD,MAAA;;;;"}