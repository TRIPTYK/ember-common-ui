{"version":3,"file":"tpk-textarea.js","sources":["../../src/components/tpk-textarea.gts"],"sourcesContent":["import { action } from '@ember/object';\nimport {\n  BaseUIComponent,\n  type BaseUIComponentArgs,\n  type HtmlInputEvent,\n} from './base.ts';\nimport type { MergeDeep } from 'type-fest';\nimport TpkTextareaInputComponent from './tpk-textarea/input.gts';\nimport type { WithBoundArgs } from '@glint/template';\nimport { hash } from '@ember/helper';\nimport { tracked } from 'tracked-built-ins';\nimport TpkLabel from './tpk-label.gts';\nimport { assert } from '@ember/debug';\n\nexport type TpkTextareaSignature = {\n  Args: MergeDeep<\n    BaseUIComponentArgs['Args'],\n    {\n      value?: string;\n      placeholder?: string;\n      disabled?: boolean;\n      onChange?: (value: string, e: Event) => unknown;\n      maxLength?: number;\n    }\n  >;\n  Blocks: {\n    default: [\n      {\n        Input: WithBoundArgs<\n          typeof TpkTextareaInputComponent,\n\n          | 'guid'\n          | 'value'\n          | 'changeEvent'\n          | 'disabled'\n          | 'onChange'\n          | 'placeholder'\n          | 'updateCharacterCount'\n          | 'setupCharacterCount'\n          | 'maxLength'\n        >;\n        Label: WithBoundArgs<\n          typeof TpkLabel,\n          'guid' | 'label'\n        >;\n        changeEvent: 'input' | 'change';\n        onChange: (value: HtmlInputEvent, event: Event) => void;\n        guid: string;\n        charCount: number;\n        maxLength?: number;\n      },\n    ];\n  };\n};\nexport default class TpkTextareaComponent extends BaseUIComponent<TpkTextareaSignature> {\n  @tracked charCount = 0;\n\n  public constructor(owner: unknown, args: TpkTextareaSignature['Args']) {\n    super(owner, args);\n    assert('@label must be a string', typeof args.label === 'string');\n  }\n\n  @action\n  onChange(e: Event) {\n    e.preventDefault();\n    const { value } = e.target as HTMLInputElement;\n    this.args.onChange?.(value, e);\n  }\n\n  @action\n  updateCharacterCount(e: Event) {\n    const { value } = e.target as HTMLTextAreaElement;\n    this.charCount = value.length;\n  }\n\n  @action\n  setupCharacterCount(e: HTMLTextAreaElement) {\n    this.charCount = e.value.length;\n  }\n\n  <template>\n    {{yield\n      (hash\n        Label=(component\n          TpkLabel\n          guid=this.guid\n          label=@label\n        )\n        Input=(component\n          TpkTextareaInputComponent\n          guid=this.guid\n          value=@value\n          updateCharacterCount=this.updateCharacterCount\n          setupCharacterCount=this.setupCharacterCount\n          maxLength=@maxLength\n          changeEvent=this.changeEvent\n          placeholder=@placeholder\n          disabled=@disabled\n          onChange=this.onChange\n        )\n        charCount=this.charCount\n        maxLength=@maxLength\n        changeEvent=this.changeEvent\n        guid=this.guid\n        onChange=this.onChange\n      )\n    }}\n  </template>\n}\n"],"names":["TpkTextareaComponent","BaseUIComponent","constructor","owner","args","_initializerDefineProperty","_descriptor","assert","label","onChange","e","preventDefault","value","target","updateCharacterCount","charCount","length","setupCharacterCount","setComponentTemplate","precompileTemplate","strictMode","scope","hash","TpkLabel","TpkTextareaInputComponent","_TpkTextareaComponent","_applyDecoratedDescriptor","_class","prototype","tracked","configurable","enumerable","writable","initializer","action","Object","getOwnPropertyDescriptor"],"mappings":";;;;;;;;;;;;AAsDqBA,IAAAA,0DAAN,MAAMA,6BAA6BC,eAAgB,CAAA;AAGhEC,EAAAA,WAAAA,CAAmBC,KAAc,EAAEC,IAAkC,EAAE;AACrE,IAAA,KAAK,CAACD,KAAO,EAAAC,IAAA,CAAA,CAAA;AAAAC,IAAAA,0BAAA,oBAAAC,WAAA,EAAA,IAAA,CAAA,CAAA;IACbC,MAAA,CAAO,yBAA2B,EAAA,OAAOH,IAAK,CAAAI,KAAK,KAAK,QAAA,CAAA,CAAA;AAC1D,GAAA;EAGAC,QAASA,CAAAC,CAAQ,EAAE;IACjBA,CAAA,CAAEC,cAAc,EAAA,CAAA;IAChB,MAAM;AAAEC,MAAAA,KAAAA;KAAO,GAAGF,CAAA,CAAEG,MAAU,CAAA;IAC9B,IAAI,CAACT,IAAI,CAACK,QAAQ,GAAGG,KAAO,EAAAF,CAAA,CAAA,CAAA;AAC9B,GAAA;EAGAI,oBAAqBA,CAAAJ,CAAQ,EAAE;IAC7B,MAAM;AAAEE,MAAAA,KAAAA;KAAO,GAAGF,CAAA,CAAEG,MAAU,CAAA;AAC9B,IAAA,IAAI,CAACE,SAAS,GAAGH,KAAA,CAAMI,MAAM,CAAA;AAC/B,GAAA;EAGAC,mBAAoBA,CAAAP,CAAsB,EAAE;AAC1C,IAAA,IAAI,CAACK,SAAS,GAAGL,CAAE,CAAAE,KAAK,CAACI,MAAM,CAAA;AACjC,GAAA;AA8BF,CAAA,EAAAE,oBAAA,CA5BEC,kBAAA,CA2BA,6dAAA,EAAA;EAAAC,UAAA,EAAA,IAAA;AAAAC,EAAAA,KAAA,EAAAA,OAAA;IAAAC,IAAA;IAAAC,QAAA;AAAAC,IAAAA,yBAAAA;AAAA,GAAA,CAAA;AAAU,CAAA,CAAA,EAAAC,qBAAA,CAAA,EAAAA,qBAAA,CAAAnB,EAAAA,WAAA,GAAAoB,yBAAA,CAAAC,MAAA,CAAAC,SAAA,gBApDTC,OAAA,CAAA,EAAA;EAAAC,YAAA,EAAA,IAAA;EAAAC,UAAA,EAAA,IAAA;EAAAC,QAAA,EAAA,IAAA;AAAAC,EAAAA,WAAA,cAAA;AAAA,IAAA,OAAoB,CAAE,CAAA;AAAA,GAAA;AAAA,CAAA,CAAA,EAAAP,yBAAA,CAAAC,MAAA,CAAAC,SAAA,EAAA,UAAA,EAAA,CAOtBM,MAAA,CAAA,EAAAC,MAAA,CAAAC,wBAAA,CAAAT,MAAA,CAAAC,SAAA,EAAA,UAAA,CAAA,EAAAD,MAAA,CAAAC,SAAA,CAAA,EAAAF,yBAAA,CAAAC,MAAA,CAAAC,SAAA,EAAA,sBAAA,EAAA,CAOAM,MAAA,CAAA,EAAAC,MAAA,CAAAC,wBAAA,CAAAT,MAAA,CAAAC,SAAA,EAAA,sBAAA,CAAA,EAAAD,MAAA,CAAAC,SAAA,CAAA,EAAAF,yBAAA,CAAAC,MAAA,CAAAC,SAAA,EAAA,qBAAA,EAAA,CAMAM,MAAA,CAAA,EAAAC,MAAA,CAAAC,wBAAA,CAAAT,MAAA,CAAAC,SAAA,EAAA,qBAAA,CAAA,EAAAD,MAAA,CAAAC,SAAA,CAAA,EAAAD,MAAA;;;;"}