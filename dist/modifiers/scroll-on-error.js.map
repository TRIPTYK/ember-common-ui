{"version":3,"file":"scroll-on-error.js","sources":["../../src/modifiers/scroll-on-error.ts"],"sourcesContent":["import { modifier } from 'ember-modifier';\nimport type { ValidationError } from 'ember-immer-changeset';\nimport { runTask } from 'ember-lifeline';\n\nexport function scrollToFirstError(\n  target: object,\n  element: Element | Document,\n  errors: ValidationError[],\n): void {\n  const firstValidError = errors.find(\n    (error) =>\n      element.querySelector(`[anchorScrollUp=\"${error?.key}\"]`) !== null,\n  );\n\n  if (firstValidError) {\n    const errorElement = document.querySelector(\n      `[anchorScrollUp=\"${firstValidError?.key}\"]`,\n    ) as HTMLElement;\n\n    errorElement.style.transition = '0.3s ease-out';\n\n    const targetTop =\n      errorElement.getBoundingClientRect().top + window.scrollY - 85;\n\n    runTask(target, () => {\n      window.scrollTo({ top: targetTop, behavior: 'smooth' });\n    }, 20);\n  }\n}\n\nexport default modifier(function scrollOnError(\n  this: object,\n  element,\n  [errors]: [ValidationError[]],\n) {\n  scrollToFirstError(this, element, errors);\n});\n"],"names":["scrollToFirstError","target","element","errors","firstValidError","find","error","querySelector","key","errorElement","document","style","transition","targetTop","getBoundingClientRect","top","window","scrollY","runTask","scrollTo","behavior","modifier","scrollOnError"],"mappings":";;;AAIO,SAASA,kBAAkBA,CAChCC,MAAc,EACdC,OAA2B,EAC3BC,MAAyB,EACnB;EACN,MAAMC,eAAe,GAAGD,MAAM,CAACE,IAAI,CAChCC,KAAK,IACJJ,OAAO,CAACK,aAAa,CAAC,CAAA,iBAAA,EAAoBD,KAAK,EAAEE,GAAG,IAAI,CAAC,KAAK,IAClE,CAAC,CAAA;AAED,EAAA,IAAIJ,eAAe,EAAE;IACnB,MAAMK,YAAY,GAAGC,QAAQ,CAACH,aAAa,CACzC,CAAA,iBAAA,EAAoBH,eAAe,EAAEI,GAAG,CAAA,EAAA,CAC1C,CAAgB,CAAA;AAEhBC,IAAAA,YAAY,CAACE,KAAK,CAACC,UAAU,GAAG,eAAe,CAAA;AAE/C,IAAA,MAAMC,SAAS,GACbJ,YAAY,CAACK,qBAAqB,EAAE,CAACC,GAAG,GAAGC,MAAM,CAACC,OAAO,GAAG,EAAE,CAAA;IAEhEC,OAAO,CAACjB,MAAM,EAAE,MAAM;MACpBe,MAAM,CAACG,QAAQ,CAAC;AAAEJ,QAAAA,GAAG,EAAEF,SAAS;AAAEO,QAAAA,QAAQ,EAAE,QAAA;AAAS,OAAC,CAAC,CAAA;KACxD,EAAE,EAAE,CAAC,CAAA;AACR,GAAA;AACF,CAAA;AAEA,oBAAeC,QAAQ,CAAC,SAASC,aAAaA,CAE5CpB,OAAO,EACP,CAACC,MAAM,CAAsB,EAC7B;AACAH,EAAAA,kBAAkB,CAAC,IAAI,EAAEE,OAAO,EAAEC,MAAM,CAAC,CAAA;AAC3C,CAAC,CAAC;;;;"}