{{#if @isOpen}}
  {{#in-element this.modalContainer insertBefore=null}}
    <div
      class='tpk-modal-container'
      role='dialog'
      aria-labelledby={{@title}}
      {{this.handleEscapeKey @isOpen @onClose}}
      {{focus-trap options=(hash
        allowOutsideClick=this.controlledClose
      )}}
      {{did-insert this.updateStack}}
      {{will-destroy this.willDestroyNode}}
      ...attributes
    >
      {{! Waiting for the backdrop filter css attribute }}
      {{#if (has-block-params)}}
        {{yield
          (hash
            Content=(component
              'tpk-modal/content'
              title=@title
              isOpen=@isOpen
              onClose=@onClose
            )
            Cover=(component 'tpk-modal/cover' onCoverClick=this.controlledClose)
          )
        }}
      {{else}}
        <TpkModal::Cover @onCoverClick={{this.controlledClose}} />
        <TpkModal::Content
          @title={{@title}}
          @isOpen={{@isOpen}}
          @onClose={{@onClose}}
        >
          {{yield}}
        </TpkModal::Content>
      {{/if}}
    </div>
  {{/in-element}}
{{/if}}